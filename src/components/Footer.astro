---
import Icon from "astro-svg-icon";
import Divider from "./Divider.astro";
import Facebook from "@/assets/images/icons/Facebook.svg";
import Github from "@/assets/images/icons/Github.svg";
import Instagram from "@/assets/images/icons/Instagram.svg";
import LinkedIn from "@/assets/images/icons/LinkedIn.svg";
import Mail from "@/assets/images/icons/Mail.svg";
import Youtube from "@/assets/images/icons/Youtube.svg";
import socials from "@/data/socials.json";

const year = new Date().getFullYear();

const data: Record<
  string,
  { icon: string; url: string; title: string; viewBox: string }
> = {
  github: {
    title: socials.github.title,
    icon: Github.src,
    url: socials.github.url,
    viewBox: `0 0 ${Github.width} ${Github.height}`,
  },
  email: {
    title: socials.email.title,
    icon: Mail.src,
    url: `mailto:${socials.email.url}`,
    viewBox: `0 0 ${Mail.width} ${Mail.height}`,
  },
  linkedin: {
    title: socials.linkedin.title,
    icon: LinkedIn.src,
    url: socials.linkedin.url,
    viewBox: `0 0 ${LinkedIn.width} ${LinkedIn.height}`,
  },
  instagram: {
    title: socials.instagram.title,
    icon: Instagram.src,
    url: socials.instagram.url,
    viewBox: `0 0 ${Instagram.width} ${Instagram.height}`,
  },
  youtube: {
    title: socials.youtube.title,
    icon: Youtube.src,
    url: socials.youtube.url,
    viewBox: `0 0 ${Youtube.width} ${Youtube.height}`,
  },
  facebook: {
    title: socials.facebook.title,
    icon: Facebook.src,
    url: socials.facebook.url,
    viewBox: `0 0 ${Facebook.width} ${Facebook.height}`,
  },
};
---

<footer>
  <Divider />
  <div class="socials">
    {
      Object.values(data).map(({ title, icon, url, viewBox }) => (
        <a href={url} rel="me">
          <span class="visually-hidden">{title}</span>
          <Icon src={icon} viewBox={viewBox} />
        </a>
      ))
    }
  </div>
  <p>
    View the source on <a href="https://github.com/karesztrk/portfolio/"
      >Github</a
    >. Hosted on <a href="https://www.netlify.com/">Netlify</a>. Built with <a
      href="https://astro.build/">Astro</a
    >.
  </p>
  <p class="copyright">Károly Török &copy; {year}</p>
</footer>

<style>
  footer {
    container: footer / inline-size;
    grid-column: content;
    display: flex;
    flex-direction: column;
    gap: 0.25rem;
    margin-block: 8px;

    > .divider {
      margin-block: 0.5rem 1rem;
    }

    > p {
      margin: 0;
      text-align: center;
      font-size: 0.75rem;

      > a {
        color: var(--color-text);
        text-decoration: underline;
      }
    }

    > .socials {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 0.5rem;
      margin-block: 0.5rem;

      > a {
        font-size: 1.25rem;
        line-height: 1;
      }

      & .icon {
        vertical-align: middle;
        text-align: center;
        color: var(--color-title);
      }
    }
  }
</style>
